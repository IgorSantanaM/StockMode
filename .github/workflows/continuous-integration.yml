name: continuous-integration
on: [push, pull_request]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    -  name: Checkout Repository
       uses: actions/checkout@v4

    -  name: Setup .NET
       uses: actions/setup-dotnet@v3
       with:
        dotnet-version: '10.x'

    -  name: Restore packages
       run: dotnet restore StockMode.sln
        
    -  name: Build Project
       run: dotnet build --configuration Release --no-restore StockMode.sln

  test:
    needs: build
    runs-on: ubuntu-latest
    steps:
    -  name: Setup Docker
       uses: docker/setup-docker-action@v4.5.0
       
    -  name: Run Tests
       run: dotnet test --configuration Release --no-build --verbosity normal StockMode.sln
